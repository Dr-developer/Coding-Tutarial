<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø¨Ø§Ø²ÛŒ Pig â€” ØªØ§Ø³</title>
  <style>
    /* Ø³Ø¨Ú© Ø³Ø§Ø¯Ù‡ Ùˆ ØªÙ…ÛŒØ² */
    :root{
      --bg: #0f172a;
      --card: #111827;
      --accent: #06b6d4;
      --muted: #94a3b8;
      --win: #16a34a;
    }
    *{box-sizing:border-box;font-family:Segoe UI, Tahoma, Arial, "Noto Sans", sans-serif}
    body{
      margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center;
      background: radial-gradient(circle at 10% 10%, #071022 0%, var(--bg) 40%);
      color:#e6eef6; padding:20px;
    }
    .wrap{
      width:100%; max-width:940px; display:grid; grid-template-columns:1fr 320px; gap:20px;
    }
    .board{background:linear-gradient(180deg,#0b1220 0%, #0f172a 100%); padding:22px; border-radius:14px; box-shadow:0 10px 30px rgba(2,6,23,.6);}
    .players{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    .player{
      background:var(--card); padding:16px; border-radius:10px; position:relative; min-height:120px;
    }
    .player.active{box-shadow:0 6px 18px rgba(6,182,212,0.12); border:2px solid rgba(6,182,212,0.14);}
    .player .title{font-weight:700; font-size:18px; color:#fff;}
    .score{font-size:42px; font-weight:800; margin-top:6px;}
    .turn-score{position:absolute; left:14px; bottom:14px; background:rgba(255,255,255,0.03); padding:8px 12px; border-radius:8px; color:var(--muted);}
    .controls{background:var(--card); padding:18px; border-radius:12px; display:flex; flex-direction:column; gap:12px; align-items:stretch;}
    .dice{
      height:120px; display:flex; align-items:center; justify-content:center; font-size:40px; font-weight:800;
      background:linear-gradient(180deg,#0b1220,#0b1630); border-radius:8px; color:#fff;
    }
    .btn-row{display:flex; gap:10px;}
    button{flex:1; padding:10px 12px; border-radius:10px; border:0; cursor:pointer; font-weight:700;}
    .btn-roll{background:linear-gradient(90deg,#06b6d4,#3b82f6); color:#042028;}
    .btn-hold{background:linear-gradient(90deg,#f59e0b,#ef4444); color:#1b0500;}
    .btn-new{background:transparent; border:1px solid rgba(255,255,255,0.06); color:var(--muted);}
    .meta{display:flex; gap:8px; align-items:center; justify-content:space-between;}
    label{font-size:13px; color:var(--muted);}
    input[type="number"]{width:100px; padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:#e6eef6;}
    .log{background:rgba(255,255,255,0.02); padding:10px; border-radius:8px; max-height:160px; overflow:auto; font-size:13px; color:var(--muted);}
    .winner-badge{position:absolute; top:8px; right:8px; background:var(--win); color:#01210f; padding:6px 8px; border-radius:8px; font-weight:700;}
    /* Ù…ÙˆØ¨Ø§ÛŒÙ„ */
    @media (max-width:860px){
      .wrap{grid-template-columns:1fr; padding:6px}
      .controls{order:2}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="board">
      <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:14px;">
        <h1 style="margin:0; font-size:20px;">Ø¨Ø§Ø²ÛŒ Pig â€” ØªØ§Ø³</h1>
        <div style="color:var(--muted); font-size:13px;">Ù‚ÙˆØ§Ù†ÛŒÙ†: ØªØ§ ÙˆÙ‚ØªÛŒ Û± Ù†ÛŒØ§ÙˆØ±Ø¯ÛŒ Ø§Ø¯Ø§Ù…Ù‡ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø±ÙˆÙ„ Ú©Ù†ÛŒ â€” Ø§Ú¯Ø± Û± Ø¨ÛŒØ§Ø¯ Ù†ÙˆØ¨Øª Ù…ÛŒâ€ŒØ±Ù‡ Ùˆ Ø§Ù…ØªÛŒØ§Ø² Ù…ÙˆÙ‚Øª Ø§Ø² Ø¨ÛŒÙ† Ù…ÛŒØ±Ù‡.</div>
      </div>

      <div class="players">
        <div id="player0" class="player active">
          <div class="title">Ø¨Ø§Ø²ÛŒÚ©Ù† Û±</div>
          <div id="score0" class="score">0</div>
          <div id="badge0" class="winner-badge" style="display:none">Ø¨Ø±Ø¯!</div>
          <div class="turn-score">Ø§Ù…ØªÛŒØ§Ø² Ù†ÙˆØ¨Øª: <span id="turn0">0</span></div>
        </div>
        <div id="player1" class="player">
          <div class="title">Ø¨Ø§Ø²ÛŒÚ©Ù† Û²</div>
          <div id="score1" class="score">0</div>
          <div id="badge1" class="winner-badge" style="display:none">Ø¨Ø±Ø¯!</div>
          <div class="turn-score">Ø§Ù…ØªÛŒØ§Ø² Ù†ÙˆØ¨Øª: <span id="turn1">0</span></div>
        </div>
      </div>

      <div style="margin-top:16px; display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap;">
        <div style="display:flex; gap:12px; align-items:center;">
          <div class="dice" id="dice">â€”</div>
          <div>
            <div style="margin-bottom:6px;"><label>Ø§Ù…ØªÛŒØ§Ø² Ù‡Ø¯Ù:</label></div>
            <input id="targetInput" type="number" min="10" value="100" />
          </div>
        </div>

        <div style="flex:1; display:flex; justify-content:flex-end;">
          <div style="width:320px;">
            <div class="controls">
              <div class="meta">
                <div style="font-size:14px;">Ù†ÙˆØ¨Øª: <strong id="activeText">Ø¨Ø§Ø²ÛŒÚ©Ù† Û±</strong></div>
                <div style="font-size:13px; color:var(--muted);">Ø§Ù…ØªÛŒØ§Ø² Ù‡Ø¯Ù Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø¯ Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†</div>
              </div>

              <div class="btn-row">
                <button id="rollBtn" class="btn-roll">Roll</button>
                <button id="holdBtn" class="btn-hold">Hold</button>
                <button id="newBtn" class="btn-new">New Game</button>
              </div>

              <div>
                <div style="font-size:13px; margin-bottom:6px; color:var(--muted)">Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§</div>
                <div id="log" class="log"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div style="display:flex; flex-direction:column; gap:12px;">
      <div style="background:var(--card); padding:14px; border-radius:12px;">
        <h3 style="margin:0 0 8px 0">Ù‚ÙˆØ§Ù†ÛŒÙ† Ø®Ù„Ø§ØµÙ‡</h3>
        <ul style="margin:0 0 0 18px; color:var(--muted)">
          <li>Ù‡Ø± Ø¨Ø§Ø± Ø±ÙˆÙ„: Ø§Ú¯Ø± Û± Ù†ÛŒØ§ÛŒØ¯ØŒ Ù…Ù‚Ø¯Ø§Ø± ØªØ§Ø³ Ø¨Ù‡ Ø§Ù…ØªÛŒØ§Ø² Ù†ÙˆØ¨Øª Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</li>
          <li>ÙˆÙ‚ØªÛŒ Hold Ø¨Ø²Ù†ÛŒØŒ Ø§Ù…ØªÛŒØ§Ø² Ù†ÙˆØ¨Øª Ø¨Ù‡ Ø§Ù…ØªÛŒØ§Ø² Ú©Ù„ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ù†ÙˆØ¨Øª Ø¨Ù‡ Ø­Ø±ÛŒÙ Ù…ÛŒâ€ŒØ±ÙˆØ¯.</li>
          <li>Ø§Ú¯Ø± ØªØ§Ø³ Û± Ø¨ÛŒØ§ÛŒØ¯ØŒ Ø§Ù…ØªÛŒØ§Ø² Ù†ÙˆØ¨Øª ØµÙØ± Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ù†ÙˆØ¨Øª Ù…ÛŒâ€ŒØ±ÙˆØ¯.</li>
          <li>Ø§ÙˆÙ„ÛŒÙ† Ø¨Ø§Ø²ÛŒÚ©Ù†ÛŒ Ú©Ù‡ Ø§Ù…ØªÛŒØ§Ø² Ú©Ù„Ø´ >= Ø§Ù…ØªÛŒØ§Ø² Ù‡Ø¯Ù Ø´ÙˆØ¯ØŒ Ø¨Ø±Ù†Ø¯Ù‡ Ø§Ø³Øª.</li>
        </ul>
      </div>

      <div style="background:var(--card); padding:14px; border-radius:12px;">
        <h3 style="margin:0 0 8px 0">ØªÙˆØ¶ÛŒØ­Ø§Øª</h3>
        <div style="color:var(--muted); font-size:13px">Ú©Ø¯ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒÙ†ÙˆÛŒØ³Ù… Ø³Ø§Ø¯Ù‡ Ùˆ Ù‚Ø§Ø¨Ù„ ÙÙ‡Ù… Ø§Ø³Øª ØªØ§ Ø¨ØªÙˆØ§Ù†ÛŒ Ø³Ø±ÛŒØ¹ ØªØºÛŒÛŒØ±Ø´ Ø¨Ø¯ÛŒ: Ù…Ø«Ù„Ø§Ù‹ ØªØºÛŒÛŒØ± Ù‚Ø§Ù†ÙˆÙ† Ø±ÙˆÛŒ Û² ØªØ§ ØªØ§Ø³ØŒ Ø§Ø¶Ø§ÙÙ‡â€ŒÚ©Ø±Ø¯Ù† Ø§Ù†ÛŒÙ…ÛŒØ´Ù†ØŒ ÛŒØ§ Ø³Ø§Ø®Øª Ù†Ø³Ø®Ù‡Ù” ØªÚ©â€ŒÙ†ÙØ±Ù‡ Ø¨Ø§ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ.</div>
      </div>
    </div>
  </div>

  <script>
    // ÙˆØ¶Ø¹ÛŒØª Ø¨Ø§Ø²ÛŒ
    const state = {
      scores: [0,0],      // Ø§Ù…ØªÛŒØ§Ø² Ú©Ù„ÛŒ Ù‡Ø± Ø¨Ø§Ø²ÛŒÚ©Ù†
      turnScore: 0,       // Ø§Ù…ØªÛŒØ§Ø² Ù…ÙˆÙ‚Øª Ø¯Ø± Ù†ÙˆØ¨Øª Ø¬Ø§Ø±ÛŒ
      active: 0,          // Ø¨Ø§Ø²ÛŒÚ©Ù† ÙØ¹Ø§Ù„: 0 ÛŒØ§ 1
      playing: true,
      target: 100
    };

    // Ø§Ù„Ù…Ù†Øªâ€ŒÙ‡Ø§
    const scoreEls = [document.getElementById('score0'), document.getElementById('score1')];
    const turnEls = [document.getElementById('turn0'), document.getElementById('turn1')];
    const playerCards = [document.getElementById('player0'), document.getElementById('player1')];
    const badgeEls = [document.getElementById('badge0'), document.getElementById('badge1')];
    const diceEl = document.getElementById('dice');
    const activeText = document.getElementById('activeText');
    const logEl = document.getElementById('log');
    const targetInput = document.getElementById('targetInput');

    // Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
    const rollBtn = document.getElementById('rollBtn');
    const holdBtn = document.getElementById('holdBtn');
    const newBtn = document.getElementById('newBtn');

    // Ù…Ù‚Ø¯Ø§Ø± Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
    function initGame(){
      state.scores = [0,0];
      state.turnScore = 0;
      state.active = 0;
      state.playing = true;
      const t = parseInt(targetInput.value) || 100;
      state.target = Math.max(10, t);
      updateUI();
      log('Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÛŒØ¯ Ø´Ø±ÙˆØ¹ Ø´Ø¯. Ù‡Ø¯Ù: ' + state.target);
      diceEl.textContent = 'â€”';
      badgeEls.forEach(b => b.style.display='none');
    }

    // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆÛŒÙˆ
    function updateUI(){
      scoreEls[0].textContent = state.scores[0];
      scoreEls[1].textContent = state.scores[1];
      turnEls[0].textContent = state.active === 0 ? state.turnScore : 0;
      turnEls[1].textContent = state.active === 1 ? state.turnScore : 0;
      playerCards.forEach((el, idx) => {
        el.classList.toggle('active', state.active === idx && state.playing);
      });
      activeText.textContent = state.playing ? (state.active === 0 ? 'Ø¨Ø§Ø²ÛŒÚ©Ù† Û±' : 'Ø¨Ø§Ø²ÛŒÚ©Ù† Û²') : 'Ù¾Ø§ÛŒØ§Ù†';
    }

    // Ù„Ø§Ú¯
    function log(msg){
      const time = new Date().toLocaleTimeString();
      logEl.innerHTML = `<div style="margin-bottom:6px"><strong style="color:#cbd5e1">${time}</strong> â€” ${escapeHtml(msg)}</div>` + logEl.innerHTML;
    }
    function escapeHtml(s){ return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

    // Ø±ÙˆÙ„ ØªØ§Ø³
    function rollDice(){
      if(!state.playing) return;
      const r = Math.floor(Math.random()*6)+1;
      // Ù†Ù…Ø§ÛŒØ´ Ø¹Ø¯Ø¯ ØªØ§Ø³
      diceEl.textContent = r;
      // Ø³Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ù†ÛŒÙ…ÛŒØ´Ù†: Ú©ÙˆÚ†Ú© Ùˆ Ø¨Ø²Ø±Ú¯ Ø´Ø¯Ù†
      diceEl.animate([{transform:'scale(1)'},{transform:'scale(1.06)'},{transform:'scale(1)'}], {duration:220});

      if(r === 1){
        // Ø§Ø² Ø¯Ø³Øª Ø±ÙØªÙ† Ø§Ù…ØªÛŒØ§Ø² Ù†ÙˆØ¨Øª
        log(`ØªØ§Ø³ ${r} Ø¢Ù…Ø¯ â€” Ø§Ù…ØªÛŒØ§Ø² Ù†ÙˆØ¨Øª Ø§Ø² Ø¨ÛŒÙ† Ø±ÙØª. Ù†ÙˆØ¨Øª Ø¹ÙˆØ¶ Ù…ÛŒâ€ŒØ´ÙˆØ¯.`);
        state.turnScore = 0;
        switchPlayer();
      } else {
        state.turnScore += r;
        log(`ØªØ§Ø³ ${r} â€” Ø§Ù…ØªÛŒØ§Ø² Ø§ÛŒÙ† Ù†ÙˆØ¨Øª += ${r} (Ø­Ø§Ù„Ø§ ${state.turnScore})`);
      }
      updateUI();
    }

    // Ù‡ÙˆÙ„Ø¯ Ú©Ø±Ø¯Ù†
    function hold(){
      if(!state.playing) return;
      state.scores[state.active] += state.turnScore;
      log(`Ø¨Ø§Ø²ÛŒÚ©Ù† ${state.active+1} Hold Ú©Ø±Ø¯ â€” +${state.turnScore} Ø¨Ù‡ Ø§Ù…ØªÛŒØ§Ø² Ú©Ù„ÛŒ. Ú©Ù„: ${state.scores[state.active]}`);
      state.turnScore = 0;
      // Ø¨Ø±Ø±Ø³ÛŒ Ø¨Ø±Ø¯
      if(state.scores[state.active] >= state.target){
        finishGame(state.active);
      } else {
        switchPlayer();
        updateUI();
      }
    }

    // ØªØ¹ÙˆÛŒØ¶ Ø¨Ø§Ø²ÛŒÚ©Ù†
    function switchPlayer(){
      state.active = state.active === 0 ? 1 : 0;
      state.turnScore = 0;
      updateUI();
    }

    // Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ
    function finishGame(winnerIndex){
      state.playing = false;
      badgeEls[winnerIndex].style.display = 'block';
      log(`ğŸ‰ Ø¨Ø§Ø²ÛŒÚ©Ù† ${winnerIndex+1} Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯! Ø§Ù…ØªÛŒØ§Ø²: ${state.scores[winnerIndex]}`);
      activeText.textContent = `Ø¨Ø§Ø²ÛŒÚ©Ù† ${winnerIndex+1} Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯`;
    }

    // ÙˆØµÙ„ Ú©Ø±Ø¯Ù† Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§
    rollBtn.addEventListener('click', rollDice);
    holdBtn.addEventListener('click', hold);
    newBtn.addEventListener('click', () => initGame());
    // Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± Ø§Ù…ØªÛŒØ§Ø² Ù‡Ø¯Ù Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡Ø¯ØŒ ÙÙ‚Ø· Ù…Ù‚Ø¯Ø§Ø± Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ø¯Ø± Ø´Ø±ÙˆØ¹ Ø¨Ø¹Ø¯ÛŒ ÛŒØ§ Ø§Ú¯Ø± Ø¨Ø§Ø²ÛŒ ØªÙ…Ø§Ù… Ø´Ø¯Ù‡ØŒ Ø¨Ø§Ø²ÛŒ Ø±Ø§ Ø±ÛŒØ³Øª Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….
    targetInput.addEventListener('change', e => {
      const v = parseInt(e.target.value) || 100;
      targetInput.value = Math.max(10, v);
      if(!state.playing) initGame();
    });

    // Ù‡Ù…ÛŒÙ† Ø§Ù„Ø§Ù† Ø´Ø±ÙˆØ¹
    initGame();

    // Ø¨Ø±Ø§ÛŒ ØªÙˆØ³Ø¹Ù‡: ØªØ§Ø¨Ø¹ÛŒ Ø¨Ø±Ø§ÛŒ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§Ø²ÛŒ Ø¨Ø§ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Ø³Ø§Ø¯Ù‡ (Ù…Ø«Ø§Ù„ Ø¢Ù…ÙˆØ²Ø´ÛŒ)
    // Ø§Ú¯Ø± Ø®ÙˆØ§Ø³ØªÛŒ Ø¨Ú¯Ù… Ø§ÛŒÙ† Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø² Ø±Ùˆ Ù‡Ù… Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†Ù… ØªØ§ Ø¨ØªÙˆÙ†ÛŒ Ø¢Ù…Ø§Ø±ÛŒ Ø¨Ú¯ÛŒØ±ÛŒ Ú©Ù‡ Ú†Ù‡ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒâ€ŒÙ‡Ø§ÛŒÛŒ Ø¨Ù‡ØªØ±Ù†.
  </script>
</body>
  </html>
